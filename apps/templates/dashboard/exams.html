{% extends 'layouts/base.html' %} {% load crispy_forms_tags %} {% load static %} {% block title %} Maps {% endblock title %} {% block content %}

<!-- Header -->
<div class="header bg-primary pb-6">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                    <h6 class="h2 text-white d-inline-block mb-0">Exams</h6>
                    <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                        <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                            <li class="breadcrumb-item"><a href="{% url 'home:home' %}"><i class="fas fa-home"></i></a></li>
                            <li class="breadcrumb-item"><a href="{% url 'teachers:dashboard' %}">Exams</a></li>
                            <li class="breadcrumb-item"><a href="{% url 'teachers:exams' %}">Exams</a></li>
                        </ol>
                    </nav>
                </div>
                <!-- Modals -->
                <div class="col-lg-6 col-5 text-right">
                    <!-- Modals Buttons -->
                    <button type="button" data-toggle="modal" data-target="#newExam" class="btn btn-sm btn-neutral">
                        <i class="fas fa-plus"></i>
                        New
                    </button>
                    <button type="button" data-toggle="modal" data-target="#filterExams" class="btn btn-sm btn-warning">
                        <i class="fas fa-filter"></i>
                        Filters
                    </button>

                    <!-- New Exam Modal -->
                    <div class="modal text-left fade" id="newExam" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">New Exam</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form id="addExamForm" method="POST" action="{% url 'teachers:add-exam' %}">
                                        {% csrf_token %}
                                        <label for="#subject">Subject</label>
                                        <select class="form-control my-1" name="subject" id="subject">
                                            {% for subject in subjects %}
                                                <option value="{{ subject.pk }}">{{ subject }}</option>
                                            {% endfor %}
                                        </select>

                                        <label for="#exam_class">Class</label>
                                        <select class="form-control my-1" name="exam_class" id="exam_class">
                                            {% for class in classes %}
                                                <option value="{{ class.pk }}">{{ class.class_id }}</option>
                                            {% endfor %}
                                        </select>

                                        <label for="#fullscore" class="mt-3">Full Score</label>
                                        <input class="form-control my-1" type="number" name="full_score" id="fullscore" placeholder="Full Score">

                                        <label for="#date" class="mt-3">Date</label>
                                        <input class="form-control datepicker my-1" type="text" name="timestamp" id="date" placeholder="Exam Date">
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" onclick='$("#addExamForm").submit()'>Add</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal text-left fade" id="filterExams" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Filter Exams</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form method="GET" action="{% url 'teachers:exams' %}" id="filterForm">
                                        <h4>All exams:</h4><br>

                                        <label for="#sinceDate">since</label>
                                        <input class="form-control datepicker my-1" id="sinceDate" placeholder="2/2/2021" name="dateSince" type="text">

                                        <label for="#tillDate">until</label>
                                        <input class="form-control datepicker my-1" id="tillDate" placeholder="5/2/2021" name="dateTill" type="text">
                                        <hr>
                                        <label for="#subjectFilter">subject</label>
                                        <select class="form-control my-1" name="subjectFilter" id="subjectFilter">
                                            {% for subject in subjects %}
                                                <option value="{{ subject.pk }}">{{ subject.name }}</option>
                                            {% endfor %}
                                        </select>
                                        <hr>
                                        <label for="#classFilter">class</label>
                                        <select class="form-control my-1" name="classFilter" id="classFilter">
                                            {% for class in classes %}
                                                <option value="{{ class.pk }}">{{ class.class_id }}</option>
                                            {% endfor %}
                                        </select>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" onclick="$('#filterForm').submit()">Filter</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Page content -->
<div class="container-fluid mt--6">
    <div class="row">
        <div class="col">
            <div class="row">
                {% if filter %} {% for exam in filter %}
                <div class="col-lg-3 col-md-6">
                    <div class="card border-0 bg-gradient-gray-dark">
                        <a href="{{ exam.get_absolute_url }}" class="text-light">
                            <div class="card-body">
                                <div class="card-title">
                                    {{ exam.subject.name }}
                                </div>
                                <p class="card-text">
                                    Time: {{ exam.timestamp|date:"D, j N Y" }}<br> Class: {{ exam.exam_class }}<br> Full Score: {{ exam.full_score }}<br> Average Grade: {{ exam.get_average_grade }}
                                </p>
                            </div>
                        </a>
                    </div>
                </div>
                {% endfor %} {% else %} {% for exam in exams %}
                <div class="col-lg-3 col-md-6">
                    <div class="card border-0 bg-gradient-gray-dark">
                        <a href="{{ exam.get_absolute_url }}" class="text-light">
                            <div class="card-body">
                                <div class="card-title">
                                    {{ exam.subject.name }}
                                </div>
                                <p class="card-text">
                                    Time: {{ exam.timestamp|date:"D, j N Y" }}<br> Class: {{ exam.exam_class }}<br> Full Score: {{ exam.full_score }}<br> Average Grade: {{ exam.get_average_grade }}
                                </p>
                            </div>
                        </a>
                    </div>
                </div>
                {% endfor %} {% endif %}
            </div>
        </div>
    </div>

    {% include "includes/footer.html" %}

</div>

{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}

<script src="{% static 'assets/vendor/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js' %}"></script>

{% endblock javascripts %}